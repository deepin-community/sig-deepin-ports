---
title: T-Head TH1520 安装指南
date: 2025-10-12
---

## 支持设备

- LiCheePi 4A  

## 下载并解压镜像

```
注：以下命令以2025年10月12日对应 Github repo 的 CI 产出与 deepin-25-crimson-preview-riscv64-th1520-20250928-121959 版本为准，具体后续版本更新后请将下文指令对应部分改为正确版本及名称。
```

在[镜像列表](https://deepin-community.github.io/sig-deepin-ports/images/riscv64)中的 T-Head TH1520 栏目下载最新的 `.tar.xz` 格式的镜像包至本地，随后使用以下命令解压镜像与校验码至当前文件夹：

```shell
tar xvf deepin-25-crimson-preview-riscv64-th1520-20250928-121959.tar.xz
```

这里除去原有压缩包有四个东西：
```
.
├── deepin-25-crimson-preview-riscv64-th1520-20250928-121959.tar.xz  # 最开始的压缩包
├── deepin-th1520-riscv64-25-desktop-installer.boot.ext4             # 启动分区
├── deepin-th1520-riscv64-25-desktop-installer.md5sum                # md5校验和
├── deepin-th1520-riscv64-25-desktop-installer.root.ext4             # 操作系统根分区
└── deepin-th1520-riscv64-25-desktop-installer.sha256sum             # sha256校验和
```

检查校验和以确保文件完整性：
```shell
cat *.sha256sum 
6fe113bd42d547e7e689f80857a2aea45a066e299f1d0361fc3d8b2c55368386  deepin-th1520-riscv64-25-desktop-installer.boot.ext4
d9a3c7fa640b9f0be64190d950e2723ec4c1ceb1722e13912e6bf6b577366cda  deepin-th1520-riscv64-25-desktop-installer.root.ext4
sha256sum *.boot.ext4 
6fe113bd42d547e7e689f80857a2aea45a066e299f1d0361fc3d8b2c55368386  deepin-th1520-riscv64-25-desktop-installer.boot.ext4
sha256sum *.root.ext4
d9a3c7fa640b9f0be64190d950e2723ec4c1ceb1722e13912e6bf6b577366cda  deepin-th1520-riscv64-25-desktop-installer.root.ext4
```

但这还不够，我们还需要启动引导镜像。  

在 [deepin-riscv-kernel的actions](https://github.com/deepin-community/deepin-riscv-kernel/actions) 中找到最新的（这里的“最新”以你所在的时间为准）`build-all` action，下载其中的 `uboot-th1520-revyos` 产出，这是一个 `.zip` 文件，你可以用

```shell
unzip uboot-th1520-revyos.zip
```

在当前文件夹中进行解压。  

这里的文件有点多，应该查看开发板包装盒进行选择。比如对于 LiCheePi 4A ，如果拥有 8G LPDDR4X 内存则应选择 `light_lpi4a` ，如果拥有 16G LPDDR4X 内存则应选择 `light_lpi4a_16g` 。将对应文件夹下的 `u-boot-with-spl.bin` 复制到刚才 deepin 系统所在的目录下。  

## 使用 fastboot 刷写镜像


按住开发板上的 `boot` 键（位于 USB-C 接口附近），使用 USB-C to USB-A 线缆（开发板包装内附赠）与电脑连接，松开 `boot` 按键，在本机上输入命令  
```shell
lsusb
```
检查结果中是否出现 `ID 2345:7654 T-HEAD USB download gadget` ，若未出现，返回上述步骤重新连接。  


使用  
```shell
sudo fastboot flash ram u-boot-with-spl.bin
```

进入 u-boot 的 fastboot 烧录模式。然后重启 fastboot ：

```shell
sudo fastboot reboot
```

等待约五秒钟，直至 USB 设备被重新识别，之后进行如下刷写步骤：
```shell
sudo fastboot flash uboot u-boot-with-spl.bin # 刷写 u-boot 启动引导
sudo fastboot flash boot deepin-th1520-riscv64-25-desktop-installer.boot.ext4 # 刷写 deepin 启动分区
sudo fastboot flash root deepin-th1520-riscv64-25-desktop-installer.root.ext4 # 刷写 deepin 根分区
# 等待一段时间，根分区的刷写可能涉及较多文件...
sudo fastboot reboot # 重启开发板
```

重启完成后断开开发板与电脑的 USB 连接。

## 启动deepin

使用 USB-C 接口进行供电，等待约30秒观察风扇是否正常转动，若风扇不转动，先检查风扇是否红线接正极黑线接负极，否则镜像刷写失败，需要重新回到 `使用 fastboot 刷写镜像` 一节刷写。  

使用开发板自带的 HDMI 接口与显示器进行连接，若出现 deepin 开机 logo 并进入了新用户设定界面则刷写成功，可以正常使用 deepin 进行后续的开发工作了。  

## 附录1：使用TF卡进行烧录

感谢社区用户 [lzzhzh](https://ruyisdk.cn/u/lzzhzh/summary) 提供相关方法指导。  

_以下操作假定你的开发板中已经烧录了一个原有的系统_  
_以下命令中的 TF 卡设备名为mmcblk1, 请在进行刷写操作时务必注意设备名，数据无价！_  

只需下载并解压上述步骤中的 deepin 镜像即可，无需uboot启动引导。  
插入sd卡，并使用
```shell
sudo cfdisk /dev/mmcblk1
```
进行分区，可以使用上下方向键选择分区并使用左右方向键选择分区操作选项。如果原来设备中有分区，选中分区并使用 `Delete` 进行删除。删除完毕所有分区后选择 `Write` 进行写入。  
现在 TF 卡上应该全部为未分配空间，创建四个新分区：第一个分区占2M，第二个分区占500M存储启动分区，第三个分区占4G作为 swap 分区，第四个分区占剩余所有空间作为根分区。  
使用 `Write` 写入并使用 `Quit` 退出。  

使用如下的命令将 deepin 刷写到 TF 卡中：  
```shell
sudo mkswap /dev/mmcblk1p3 # 创建swap分区
sudo dd if=./deepin-th1520-riscv64-25-desktop-installer.root.ext4 of=/dev/mmcblk1p4 conv=sync bs=10M status=progress # 刷写 deepin 根分区
sudo dd if=./deepin-th1520-riscv64-25-desktop-installer.boot.ext4 of=/dev/mmcblk1p2 conv=sync bs=10M status=progress # 刷写 deepin 启动分区
sudo sync # 保证所有数据落盘
```

将 TF 卡插入开发板（如果使用开发板进行刷写则直接把 TF 卡留在开发板中即可），重启开发板即可通过 TF 卡进入卡内刷写的 deepin 系统。  
使用
```shell
sudo poweroff
```
关机，拔出 TF 卡，开机后即可继续使用原先在开发板中的系统。  
