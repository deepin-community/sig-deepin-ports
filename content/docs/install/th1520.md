---
title: T-Head TH1520 安装指南
date: 2025-10-12
---

## 支持设备

- LiCheePi 4A  

## 下载并解压镜像

```
注：以下命令以2025年10月12日对应 Github repo 的 CI 产出与 deepin-25-crimson-preview-riscv64-th1520-20250928-121959 版本为准，具体后续版本更新后请将下文指令对应部分改为正确版本及名称。
```

在[镜像列表](https://deepin-community.github.io/sig-deepin-ports/images/riscv64)中的 T-Head TH1520 栏目下载最新的 `.tar.xz` 格式的镜像包至本地，随后使用以下命令解压镜像与校验码至当前文件夹：

```shell
tar xvf deepin-25-crimson-preview-riscv64-th1520-20250928-121959.tar.xz
```

这里除去原有压缩包有四个东西：
```
.
├── deepin-25-crimson-preview-riscv64-th1520-20250928-121959.tar.xz  # 最开始的压缩包
├── deepin-th1520-riscv64-25-desktop-installer.boot.ext4             # 启动分区
├── deepin-th1520-riscv64-25-desktop-installer.md5sum                # md5校验和
├── deepin-th1520-riscv64-25-desktop-installer.root.ext4             # 操作系统根分区
└── deepin-th1520-riscv64-25-desktop-installer.sha256sum             # sha256校验和
```

检查校验和以确保文件完整性：
```shell
cat *.sha256sum 
6fe113bd42d547e7e689f80857a2aea45a066e299f1d0361fc3d8b2c55368386  deepin-th1520-riscv64-25-desktop-installer.boot.ext4
d9a3c7fa640b9f0be64190d950e2723ec4c1ceb1722e13912e6bf6b577366cda  deepin-th1520-riscv64-25-desktop-installer.root.ext4
sha256sum *.boot.ext4 
6fe113bd42d547e7e689f80857a2aea45a066e299f1d0361fc3d8b2c55368386  deepin-th1520-riscv64-25-desktop-installer.boot.ext4
sha256sum *.root.ext4
d9a3c7fa640b9f0be64190d950e2723ec4c1ceb1722e13912e6bf6b577366cda  deepin-th1520-riscv64-25-desktop-installer.root.ext4
```

但这还不够，我们还需要启动引导镜像。  

在 [deepin-riscv-kernel的actions](https://github.com/deepin-community/deepin-riscv-kernel/actions) 中找到最新的（这里的“最新”以你所在的时间为准）`build-all` action，下载其中的 `uboot-th1520-revyos` 产出，这是一个 `.zip` 文件，你可以用

```shell
unzip uboot-th1520-revyos.zip
```

在当前文件夹中进行解压。  

这里的文件有点多，应该查看开发板包装盒进行选择。比如对于 LiCheePi 4A ，如果拥有 8G LPDDR4X 内存则应选择 `light_lpi4a` ，如果拥有 16G LPDDR4X 内存则应选择 `light_lpi4a_16g` 。将对应文件夹下的 `u-boot-with-spl.bin` 复制到刚才 deepin 系统所在的目录下。  

## 使用 fastboot 刷写镜像


按住开发板上的 `boot` 键（位于 USB-C 接口附近），使用 USB-C to USB-A 线缆（开发板包装内附赠）与电脑连接，松开 `boot` 按键，在本机上输入命令  
```shell
lsusb
```
检查结果中是否出现 `ID 2345:7654 T-HEAD USB download gadget` ，若未出现，返回上述步骤重新连接。  


使用  
```shell
sudo fastboot flash ram u-boot-with-spl.bin
```

进入 u-boot 的 fastboot 烧录模式。然后重启 fastboot ：

```shell
sudo fastboot reboot
```

等待约五秒钟，直至 USB 设备被重新识别，之后进行如下刷写步骤：
```shell
sudo fastboot flash uboot u-boot-with-spl.bin # 刷写 u-boot 启动引导
sudo fastboot flash boot deepin-th1520-riscv64-25-desktop-installer.boot.ext4 # 刷写 deepin 启动分区
sudo fastboot flash root deepin-th1520-riscv64-25-desktop-installer.root.ext4 # 刷写 deepin 根分区
# 等待一段时间，根分区的刷写可能涉及较多文件...
sudo fastboot reboot # 重启开发板
```

重启完成后断开开发板与电脑的 USB 连接。

## 启动deepin

使用 USB-C 接口进行供电，等待约30秒观察风扇是否正常转动，若风扇不转动，先检查风扇是否红线接正极黑线接负极，否则镜像刷写失败，需要重新回到 `使用 fastboot 刷写镜像` 一节刷写。  

使用开发板自带的 HDMI 接口与显示器进行连接，若出现 deepin 开机 logo 并进入了新用户设定界面则刷写成功，可以正常使用 deepin 进行后续的开发工作了。  

## 附录1：使用TF卡进行烧录

感谢社区用户 [lzzhzh](https://ruyisdk.cn/u/lzzhzh/summary) 提供相关方法指导。  

_以下命令使用2025年9月30日版本的 revyos TF 镜像进行操作，请按实际版本为准。_  
_以下操作中涉及对存储介质的擦写，本部分中 TF 卡设备名为/dev/sdb, 请务必在操作前谨慎检查设备名再进行后续操作，数据无价！_  

这里只需要下载前述第一步的 deepin 镜像包即可，无需下载启动引导镜像。  

我们还需要 [revyos的TF镜像文件](https://fast-mirror.isrc.ac.cn/revyos/extra/images/lpi4a/) ，按照你所处的时间找到最新的版本。这是一个 `.zst` 文件，我们可以使用  
```shell
unzstd ./sdcard-lpi4a-20250930_113443.img.zst
```
进行解压。解压后出现了一个镜像文件：  
```shell
sdcard-lpi4a-20250930_113443.img
```

插入 TF 卡，使用  
```
lsblk
```
检查TF卡在本机上对应的设备名，若 TF 卡在之前使用时已划分分区，可使用  
```shell
sudo dd if=/dev/zero of=/dev/sdb bs=1M count=10
sudo sync
```
删除分区表。  

使用
```shell
sudo dd if=./sdcard-lpi4a-20250930_113443.img of=/dev/sdb conv=sync bs=10M status=progress
```
向 TF 卡刷写revyos镜像文件，刷写后通过
```shell
lsblk
```
可看到 TF 卡中出现了四个分区。  

```
NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
sda           8:0    1     0B  0 disk 
sdb           8:16   1  59.5G  0 disk 
├─sdb1        8:17   1     2M  0 part 
├─sdb2        8:18   1   500M  0 part 
├─sdb3        8:19   1     4G  0 part 
└─sdb4        8:20   1     5G  0 part 
nvme0n1     259:0    0 953.9G  0 disk 
├─nvme0n1p1 259:1    0     1G  0 part /boot
├─nvme0n1p2 259:2    0 944.1G  0 part /nix/store
│                                     /
└─nvme0n1p3 259:3    0   8.8G  0 part [SWAP]
```

从1到4分别是启动引导、 boot 、 swap 和 root ， root 没有占用整个 TF 卡剩余空间，进行分区扩容。  

使用
```shell
sudo umount /dev/sdb*
```
取消对sdb的挂载，之后使用  
```shell
sudo cfdisk /dev/sdb
```
进行扩容，删除 `/dev/sdb4` 分区，再将未分配空间重新分配为 `sdb4` ，使用方向键移动并使用 `enter` 选择“写入”，再选择“退出”。  
退出后，再使用 `lsblk` 进行容量查看，可以看到 `/dev/sdb4` 占用了 TF 卡的剩余所有空间。  

使用如下命令分别向 boot 分区和 root 分区（第二个分区和第四个分区）进行启动分区和根分区的刷写：  
```shell
sudo dd if=./deepin-th1520-riscv64-25-desktop-installer.boot.ext4 of=/dev/sdb2 conv=sync bs=10M status=progress
sudo dd if=./deepin-th1520-riscv64-25-desktop-installer.root.ext4 of=/dev/sdb4 conv=sync bs=10M status=progress
```

刷写后，拔出 TF 卡并插入 LiCheePi 4A ，重启开发板即可进入 TF 卡内刷写的系统。若想回到开发板eMMC中刷写的系统，只需  
```shell
sudo poweroff
```
关机，拔出 TF 卡，再次开机即可。
